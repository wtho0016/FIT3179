{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Average Length of Visitor Stay by Country (2023)",
    "fontSize": 16,
    "font": "sans-serif",
    "anchor": "middle",
    "color": "#333"
  },
  "width": 700,
  "height": 500,
  "background": "transparent",
  "data": {
    "url": "https://raw.githubusercontent.com/wtho0016/FIT3179/main/DV2/Data/UN_Tourism_accommodation_hotels_11_2023.csv"
  },
  "transform": [
    {"filter": "isValid(datum['Average length of stay'])"},
    {
      "window": [{"op": "rank", "as": "rank"}],
      "sort": [{"field": "Average length of stay", "order": "descending"}]
    },
    {"filter": "datum.rank <= 20"}
  ],
  "layer": [
    {
      "mark": {"type": "rule", "color": "#3579b4", "strokeWidth": 2},
      "encoding": {
        "y": {"field": "Country", "type": "nominal", 
              "sort": {"field": "Average length of stay", "order": "descending"}
              },
        "x": {"field": "Average length of stay",
        "type": "quantitative"}
      }
    },
    {
      "mark": {"type": "circle", "color": "#0077b6", "size": 120},
      "encoding": {
        "y": {"field": "Country", "type": "nominal", "sort": "-x"},
        "x": {
          "field": "Average length of stay",
          "type": "quantitative",
          "title": "Average Length of Stay (days)"
        },
        "tooltip": [
          {"field": "Country"},
          {"field": "Average length of stay", "title": "Length of Stay (days)"}
        ]
      }
    }
  ],
  "config": {
    "axis": {"grid": false, "labelFontSize": 12},
    "view": {"stroke": "transparent"},
    "title": {"fontSize": 18, "anchor": "start", "font": "sans-serif"}
  }
}